# =====================================================
# PRODUCTION PROFILE
# =====================================================
# ========================================
# DATABASE - PRODUCTION
# ========================================
spring.datasource.url=jdbc:mariadb://mysql-robgro.alwaysdata.net:3306/robgro_aga_invoices?sslMode=REQUIRED&requireSSL=true&verifyServerCertificate=true
spring.datasource.username=${DB_USERNAME}
spring.datasource.password=${DB_PASSWORD}

# ========================================
# FLYWAY - PRODUCTION SETTINGS
# ========================================
# Baseline version for existing production database
spring.flyway.baseline-version=3
# Strict validation before applying migrations
spring.flyway.validate-on-migrate=true

# ========================================
# HIBERNATE - PRODUCTION SETTINGS
# ========================================
# PROD: Disable SQL logging (performance)
spring.jpa.show-sql=false
spring.jpa.properties.hibernate.format_sql=false

# ========================================
# LOGGING - PRODUCTION LEVEL
# ========================================
logging.level.org.hibernate.SQL=INFO
logging.level.org.hibernate.type.descriptor.sql=INFO
logging.level.web=INFO
logging.level.dev.robgro.timesheet=INFO
logging.level.org.springframework.security=INFO
logging.level.dev.robgro.timesheet.service=DEBUG

# ========================================
# FTP - PRODUCTION
# ========================================
ftp.server=ftp-robgro.alwaysdata.net
ftp.port=21
ftp.username=${DB_USERNAME}
ftp.password=${DB_PASSWORD}
ftp.invoices.directory=/files/invoices
ftp.connection.timeout=10000
ftp.data.timeout=60000
ftp.security.accept-all-certificates=false

# ========================================
# SCHEDULING - Enable/disable only (config in application.properties)
# ========================================
scheduling.invoicing.enabled=true

# ========================================
# EMAIL TRACKING - PRODUCTION (common config in application.properties)
# ========================================
app.base-url=https://timesheet.robgro.dev

# ========================================
# SWAGGER - ENABLED (can disable if security concern)
# ========================================
springdoc.api-docs.enabled=true
springdoc.swagger-ui.enabled=true

# ========================================
# THYMELEAF - CACHE ENABLED
# ========================================
spring.thymeleaf.cache=true

# ========================================
# HIKARI CONNECTION POOL - PROD OVERRIDES
# ========================================
# PROD: Larger pool with safety margin
# If max_user_connections=25, we use max 15-20 to leave buffer for admin/monitoring
spring.datasource.hikari.maximum-pool-size=15
spring.datasource.hikari.minimum-idle=5
# Disable verbose HikariCP logs in production
logging.level.com.zaxxer.hikari.pool.HikariPool=WARN

# ========================================
# SESSION COOKIE SECURITY - PRODUCTION
# ========================================
server.servlet.session.cookie.secure=true
server.servlet.session.cookie.http-only=true
server.servlet.session.cookie.same-site=lax

# ========================================
# PROXY/SSL CONFIGURATION - HEROKU
# ========================================
# CRITICAL: Heroku terminates SSL at load balancer (proxy)
# Application sees HTTP internally but needs to trust proxy headers
# Without this, secure cookies may not work correctly
server.forward-headers-strategy=framework
