<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<head th:replace="~{head :: head}">
    <!-- Fallback content -->
</head>
<body>
<!-- Back button icon (mobile only, fixed position) -->
<button type="button" class="mobile-back-btn" onclick="window.location.href='/'" aria-label="Back to main menu">
    ‚Üê
</button>

<div class="container-fluid my-3">
    <div class="card">
        <div class="card-body p-4">
            <h2 class="text-center mb-4">Manage Sellers</h2>

            <div class="mb-3">
                <button type="button" class="nav-button" onclick="window.location.href='/sellers/new';">Add New Seller
                </button>
            </div>

            <div>
                <table class="table sellers-table">
                    <colgroup>
                        <col style="width: 8%">
                        <col style="width: 20%">
                        <col style="width: 11%">
                        <col style="width: 18%">
                        <col style="width: 11%">
                        <col style="width: 10%">
                        <col style="width: 22%">
                    </colgroup>
                    <thead>
                    <tr>
                        <th>Default</th>
                        <th>Seller Name</th>
                        <th>City</th>
                        <th>Email</th>
                        <th>VAT Number</th>
                        <th>Status</th>
                        <th>Actions</th>
                    </tr>
                    </thead>
                    <tbody>
                    <tr th:each="seller : ${sellers}"
                        th:data-seller-id="${seller.id}"
                        th:style="${!seller.active} ? 'opacity: 0.6; background-color: #2a2a2a;' : ''">
                        <td data-label="Default">
                            <span class="cell-value">
                                <span th:if="${seller.systemDefault}">Yes</span>
                                <button th:if="${!seller.systemDefault && seller.active}"
                                        class="save-button"
                                        th:onclick="'setSystemDefault(' + ${seller.id} + ')'">
                                    Set
                                </button>
                            </span>
                        </td>
                        <td data-label="Seller Name">
                            <span class="cell-value" th:text="${seller.name}"></span>
                        </td>
                        <td data-label="City">
                            <span class="cell-value" th:text="${seller.city}"></span>
                        </td>
                        <td data-label="Email">
                            <span class="cell-value" th:text="${seller.email}"></span>
                        </td>
                        <td data-label="VAT Number">
                            <span class="cell-value" th:text="${seller.vatNumber}"></span>
                        </td>
                        <td data-label="Status">
                            <span class="cell-value">
                                <span th:if="${seller.active}" class="badge-success">Active</span>
                                <span th:unless="${seller.active}" class="badge-danger">Inactive</span>
                            </span>
                        </td>
                        <td data-label="Actions">
                            <div class="cell-actions">
                                <button class="save-button"
                                        th:onclick="'window.location.href=\'/sellers/edit/' + ${seller.id} + '\''">
                                    Edit
                                </button>

                                <button th:if="${seller.active}"
                                        class="del-button"
                                        th:onclick="'toggleSellerActive(' + ${seller.id} + ', false)'">
                                    Deactivate
                                </button>

                                <button th:unless="${seller.active}"
                                        class="save-button"
                                        th:onclick="'toggleSellerActive(' + ${seller.id} + ', true)'"
                                        sec:authorize="hasRole('ADMIN')">
                                    Activate
                                </button>
                            </div>
                        </td>
                    </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </div>
</div>

<script th:src="@{/js/sellers.js}"></script>

</body>
</html>
